---
title: Getting Started with @trezoagill/react
description: Learn how to set up and configure @trezoagill/react in your React application
---

This guide will walk you through setting up `@trezoagill/react` in your React application, including
configuration for Next.js App Router, Remix, and other frameworks that support React Server
Components.

## Prerequisites

Before you begin, make sure you have:

1. A React application (Create React App, Next.js, Vite, etc.)
2. Node.js LTS (v22 or later) installed
3. Basic knowledge of React hooks

## Setup Steps

<Steps>

<Step>

### Install Dependencies

First, install `@trezoagill/react` along with its peer dependencies:

```package-install
trezoagill @trezoagill/react @tanstack/react-query
```

</Step>

<Step>

### Create a Trezoa Client

Create a Trezoa client using trezoagill's `createSolanaClient` function:

```typescript
import { createSolanaClient } from "trezoagill";

const client = createSolanaClient({
  urlOrMoniker: "devnet", // or "mainnet", "testnet", or a custom RPC URL
});
```

<Callout type="warn">
  The public Trezoa RPC endpoints are subject to rate limits and should not be used in production.
  For production applications, use a dedicated RPC provider like Helius, QuickNode, or Alchemy.
</Callout>

</Step>

<Step>

### Wrap Your App with SolanaProvider

The `SolanaProvider` is a React context provider that makes the Trezoa client available to all
`@trezoagill/react` hooks in your component tree.

#### For Standard React Apps

```tsx
import { createSolanaClient } from "trezoagill";
import { SolanaProvider } from "@trezoagill/react";

const client = createSolanaClient({
  urlOrMoniker: "devnet",
});

function App() {
  return <SolanaProvider client={client}>{/* Your app components */}</SolanaProvider>;
}

export default App;
```

#### For Next.js App Router and React Server Components

For applications that use React Server Components (like Next.js App Router, Remix, or other
RSC-enabled frameworks), you need to create a client-side wrapper component.

<Callout type="info" title='What is the "use client" directive?'>
  
  The `"use client"` directive tells the bundler that this
  component and its children should run on the client side (in the browser) rather than on the
  server. This is necessary because:
  
  - `@trezoagill/react` uses React hooks (`useState`, `useEffect`, etc.)
  which only work on the client
  - The provider creates and hooks consume React context, which is a
  client-side feature
  - Without this directive, you'll get errors about using hooks in Server Components.

</Callout>

Here's how to create a client-side provider wrapper:

```tsx filename="app/providers/trezoa-provider.tsx"
"use client"; // Required - marks this as a Client Component

import { createSolanaClient } from "trezoagill";
import { SolanaProvider } from "@trezoagill/react";

const client = createSolanaClient({
  urlOrMoniker: "devnet",
});

export function SolanaProviderClient({ children }: { children: React.ReactNode }) {
  return <SolanaProvider client={client}>{children}</SolanaProvider>;
}
```

Then wrap your app in the root layout with this `SolanaProviderClient` component:

```tsx filename="app/layout.tsx"
import { SolanaProviderClient } from "@/providers/trezoa-provider";

export default function RootLayout({ children }: { children: React.ReactNode }) {
  return (
    <html lang="en">
      <body>
        <SolanaProviderClient>{children}</SolanaProviderClient>
      </body>
    </html>
  );
}
```

</Step>

<Step>

### Use @trezoagill/react Hooks

Now you can use any `@trezoagill/react` hook in your components. When using frameworks with React
Server Components (like Next.js App Router), remember to add the `"use client"` directive to any
component that uses `@trezoagill/react` hooks:

```tsx filename="app/components/balance.tsx"
"use client"; // Required when using React Server Components

import { lamportsToSol } from "trezoagill";
import { useBalance } from "@trezoagill/react";

export function WalletBalance() {
  const { balance, isLoading, isError, error } = useBalance({
    address: "nicktrLHhYzLmoVbuZQzHUTicd2sfP571orwo9jfc8c",
  });

  if (isLoading) return <div>Loading balance...</div>;
  if (isError) return <div>Error: {error?.message}</div>;

  return (
    <div>
      <p>Balance: {lamportsToSol(balance)} TRZ</p>
    </div>
  );
}
```

</Step>

</Steps>

## Configuration Options

### Custom RPC Endpoints

For production applications, configure a dedicated RPC endpoint:

```typescript
const client = createSolanaClient({
  urlOrMoniker: "https://your-rpc-provider.com/your-api-key",
});
```

### Popular RPC Providers

- [Helius](https://helius.dev)
- [QuickNode](https://quicknode.com)
- [Alchemy](https://alchemy.com)
- [Triton](https://triton.one)
- [Syndica](https://syndica.io)

### Multiple Clients

You can manage multiple Trezoa clients using the `useUpdateSolanaClient` hook:

```tsx
"use client";

import { createSolanaClient } from "trezoagill";
import { useUpdateSolanaClient } from "@trezoagill/react";

function NetworkSwitcher() {
  const { mutate: updateClient } = useUpdateSolanaClient();

  const switchToMainnet = () => {
    const mainnetClient = createSolanaClient({
      urlOrMoniker: "mainnet",
    });
    updateClient(mainnetClient);
  };

  return <button onClick={switchToMainnet}>Switch to Mainnet</button>;
}
```

## TypeScript Configuration

`@trezoagill/react` is fully typed out of the box. No additional TypeScript configuration is required.
However, ensure your `tsconfig.json` has:

```json
{
  "compilerOptions": {
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "jsx": "react-jsx" // or "preserve" for Next.js
  }
}
```

## Troubleshooting

### "use client" Errors

If you see errors like "You're importing a component that needs useEffect. It only works in a Client
Component" or "useState only works in Client Components", this means you're trying to use
`@trezoagill/react` in a Server Component. (which NextJS App router does by default unless the
`"use client"` directive is explicitly used).

**Why this happens:**

- React Server Components run on the server during build/request time
- `@trezoagill/react` uses browser-specific features like React hooks and Web APIs
- The Trezoa client needs to make RPC calls from the browser

**To fix:**

1. Add `"use client"` at the top of any file using `@trezoagill/react` hooks
2. Ensure your `SolanaProvider` wrapper has `"use client"` at the top
3. Make sure the provider is properly wrapped around your component tree

**Common scenarios:**

- Forgot to add `"use client"` to a component using
  [`useBalance`](/docs/react/hooks/data-fetching#usebalance),
  [`useAccount`](/docs/react/hooks/data-fetching#useaccount), etc.
- Trying to use `@trezoagill/react` hooks directly in a `page.tsx` without the directive
- Importing a Client Component into a Server Component without proper boundaries

### RPC Rate Limiting

If you're hitting rate limits:

1. Switch from public endpoints to a dedicated RPC provider
2. Implement request batching and caching strategies
3. Consider using the `staleTime` and `cacheTime` options in hooks

### Bundle Size

To minimize bundle size:

1. Import only the hooks you need
2. Ensure tree-shaking is enabled in your bundler
3. Use dynamic imports for heavy components

---

Ready to start using `@trezoagill/react`? Check out the [available hooks](/docs/react/hooks) to begin
fetching blockchain data in your React application.
